<html>
  <head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Nikki's Resource Stop</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"> <!-- load fontawesome -->
    <link href='https://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/bower_components/ngDialog/css/ngDialog.css">
    <link rel="stylesheet" href="/bower_components/ngDialog/css/ngDialog-theme-default.css">
    <style> .glyphicon-thumbs-up,.glyphicon-thumbs-down { cursor:pointer } 

.clearfix:before, .clearfix:after, .dl-horizontal dd:before, .dl-horizontal dd:after, .container:before, .container:after, .container-fluid:before, .container-fluid:after, .row:before, .row:after, .form-horizontal .form-group:before, .form-horizontal .form-group:after, .btn-toolbar:before, .btn-toolbar:after, .btn-group-vertical>.btn-group:before, .btn-group-vertical>.btn-group:after, .nav:before, .nav:after, .navbar:before, .navbar:after, .navbar-header:before, .navbar-header:after, .navbar-collapse:before, .navbar-collapse:after, .pager:before, .pager:after, .panel-body:before, .panel-body:after, .modal-footer:before, .modal-footer:after
{
  display: none; 
  content: " ";
}
body{
   /* min-height: 2000px;*/
    padding-top: 60px;
    background-image : url('http://www.bestinspired.com/wp-content/uploads/2015/04/nature-images.jpg');
    background-repeat: no-repeat;
    background-attachment: fixed;
     background-position: center top;

}
.navbar-default {
  background-color: transparent;  
  border-color: transparent;
}

.navbar-default .navbar-nav>li>a {
  color: white; 
  font-size: 16px;
}
.navbar-default .navbar-nav>li>a:hover{
  color: #337ab7; 
}
.transparent-background{
background:#C1FFC1;
padding:20px;
border-radius:20px;
opacity:0.4;
height:200px;
}

.transparent-background-inner{
position:relative;
top:-200px;
padding-left:10px;
padding-right:10px;
}
.alert-danger-custom{
  color: #a94442;
  background-color: #f2dede;
  border-color: #ebccd1;
  position:relative;
  top:10px;
  border-radius: 10px;
  padding:5px;
  text-align: center;
}
.alert-transparent{
  color: #3c763d;
  background-color: #C1FFC1;
  border-color: #d6e9c6;
  opacity: 0.4;
   width: 100%;
   height: 60px;
}

.addnewButton{
  position:absolute;
  top:15px;
  left:10%;
  padding: 3px;
}
.btn-block {
  display: block;
  width: 80%;
   padding: 3px;
   margin:0 auto;
}

.resource{
  position:relative;
  list-style: none;
  right:15px;
}

.rightLinks{
  color:#2e6da4;
  cursor: pointer;
}
.animate.ng-enter { 
    -webkit-animation: enter 300ms cubic-bezier(0.445, 0.050, 0.550, 0.950);
    animation: enter 300ms cubic-bezier(0.445, 0.050, 0.550, 0.950);
} 
@-webkit-keyframes enter {
  from {
      opacity: 0;
      height: 0px;
      bottom: -70px;
    }
    75% {
      bottom: 15px;
    }
    to {
        opacity: 1;
      height: 30px;
      bottom: 0px;
    }
}
@keyframes enter {
  from {
      opacity: 0;
      height: 0px;
      bottom: -70px;
    }
    75% {
      bottom: 15px;
    }
    to {
        opacity: 1;
      height: 30px;
      bottom: 0px;
    }
}

.animate.ng-leave { 
    -webkit-animation: leave 300ms cubic-bezier(0.445, 0.050, 0.550, 0.950);
    animation: leave 300ms cubic-bezier(0.445, 0.050, 0.550, 0.950);
} 
@-webkit-keyframes leave {
  to {
      opacity: 0;
      height: 0px;
      bottom: -70px;
    }
    25% {
      bottom: 15px;
    }
    from {
        opacity: 1;
      height: 30px;
      bottom: 0px;
    }
}
@keyframes leave {
  to {
      opacity: 0;
      height: 0px;
      bottom: -70px;
    }
    25% {
      bottom: 15px;
    }
    from {
        opacity: 1;
      height: 30px;
      bottom: 0px;
    }
}
</style>
</head>  
  
<body ng-app="flapperNews">

<nav class="navbar navbar-default navbar-fixed-top"> 
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header" style="margin-top:10px;">
      <a href="#" style="position:relative;font-family: 'Orbitron', sans-serif;color:#4B0082;font-size:20px;right:-60px;"> Resource STOP</a>
       <br>
       <span class="icon-bar"><i>"Compilation of <a href="mailto:nikkiweat@gmail.com">nikki's</a> top online IT Resources"</i></span>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="navbar">
  
      <form class="navbar-form navbar-left" role="search">
      <!--  <div class="form-group">
          <input type="text" class="form-control" style="border:1px solid green;border-radius:100px;" ng-model="query" placeholder="Filter resources">
        </div-->
   
      </form>


 <div class="collapse navbar-collapse" id="navbar-main">

      <ul class="nav navbar-nav navbar-right" ng-controller="NavCtrl">

       <li  
       <% if (user) { %>
        ng-show='true';
       <% } %>  
        ng-show="isLoggedIn()"><a href=""><b>
         <% if (user) { %>
         Welcome, <%= user.displayName %> <img src= <%= user._json.image.url %> width="25px;" height:"20px;"/> 
         <% } else { %>
           Welcome, {{currentUser()}}
         <% } %>
         </b></a>
      </li>


      <li  
       <% if (user) { %>
        ng-show='true'
       <% } %>  
        ng-show="isLoggedIn()">
        <a 
         <% if (user) { %>
          href="/logout"
         <% } %> 
         href="" ng-click="logOut()"><b>Log Out</b></a>
      </li>

      
      <!--if logged in as google user hide login, if reg user check token if logged in -->
      <li  
       <% if (user) { %>
        ng-hide='true'
       <% } %>  
        ng-hide="isLoggedIn()"><a href="/#/login"><b>Log In</b></a>
      </li>


      <li  
       <% if (user) { %>
        ng-hide='true'
       <% } %>  
        ng-hide="isLoggedIn()"><a href="/#/register"><b>Register</b></a>
      </li>



      </ul>
         </div>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>


	
  <div class="container">
    <div class="col-md-6 col-md-offset-3">
      <ui-view></ui-view>
    </div>
  </div>

</body>


<!--=====================================================================================================REGISTER-->
<script type="text/ng-template" id="/register.html">

<div class="transparent-background">
</div>

<div class="transparent-background-inner">
  <div ng-show="error" class="alert-danger-custom">
    <span>{{ error.message }}</span>
  </div>

  <form ng-submit="register()">
    <h3>Register</h3>

    <div class="form-group">
      <input type="text"
      class="form-control"
      placeholder="Username"
      ng-model="user.username" required></input>
    </div>
    <div class="form-group">
      <input type="password"
      class="form-control"
      placeholder="Password"
      ng-model="user.password" required></input>
    </div>
    <button type="submit" class="btn btn-primary">Register</button>
  </form>
  </div>
</script>

<!--=====================================================================================================LOGIN-->
<script type="text/ng-template" id="/login.html">

<div class="transparent-background">
</div>

<div class="transparent-background-inner">
  
   <div ng-show="error" class="alert-danger-custom">
    <span >{{ error.message }}</span>
  </div>

  <form ng-submit="logIn()">
    <h3>Log in</h3>

    <div class="form-group">
      <input type="text"
      class="form-control"
      placeholder="Username"
      ng-model="user.username" required></input>
    </div>
    <div class="form-group">
      <input type="password"
      class="form-control"
      placeholder="Password"
      ng-model="user.password" required></input>
    </div>
    <button type="submit" class="btn btn-primary">Log In</button>
    <a href="auth/google" class="btn btn-danger" style="float:right;"><span class="fa fa-google-plus"></span> Sign in with Google</a>
  </form>
  </div>
  </script>





<!--=====================================================================================================MAIN-->
<script type="text/ng-template" id="/home.html" ng-init="
 <% if (user) { %>
 googleuser='<%- user.displayName %>';
 googletoken='<%- token %>';
 <% } else { %>
 googleuser='null';
 googletoken='null';
 <% } %>
">


<div class="alert alert-transparent" role="alert"  
<% if (user) { %> ng-show='true'<% } %> ng-show="isLoggedIn()">
</div>

<button ng-click="modal(googleuser,false)" <% if (user) { %> ng-show='true'<% } %> ng-show="isLoggedIn()" class="btn btn-primary btn-block addnewButton"><b>ADD NEW RESOURCE</b></button> 

<input type="text" class="form-control" id="filter" style="border:1px solid #337ab7;border-radius:100px;" ng-model="query" placeholder="Filter resources"><br>

<ul ng-repeat="post in posts | filter:query | orderBy:'-upvotes'" class="resource animate">
<li> 
<span class="glyphicon glyphicon-thumbs-up" ng-click="incrementUpvotes(post,googletoken)"></span> {{post.upvotes}}  
<span style="font-size:14px; margin-left:8px;color:purple;"><a ng-show="post.link" style="color:purple;text-transform:uppercase;font-weight:bold;" href="{{post.link}}" target="_blank">{{post.title}}</a> </span>
<span style="font-size:11px;">posted by {{post.author}} </span>

<span style="float:right;padding:1px;" <% if (user) { %> ng-show='true'<% } %> ng-show="isLoggedIn()">
<span class="glyphicon glyphicon-pencil rightLinks" aria-hidden="true" ng-click="modal(googleuser,post)"></span>
<!--<a href="#/posts/{{post._id}}"><span class="glyphicon glyphicon-comment rightLinks" aria-hidden="true"></span></a>-->
<span class="glyphicon glyphicon-remove rightLinks" aria-hidden="true" ng-click="delete(post,googleuser,googletoken)"></span>
</span>
</li>
</ul>

<div <% if (user) { %> ng-hide='true'<% } %> ng-hide="isLoggedIn()">
<h3>You need to <a href="/#/login">Log In</a> or <a href="/#/register">Register</a> before you can add a resource</h3>
</div>



</script>
<!--=====================================================================================================NEW POST-->

<script type="text/ng-template" id="newPost.html">
    <form ng-submit="addPost(googletoken)" <% if (user) { %> ng-show='true'<% } %> ng-show="isLoggedIn()">
        <h3>New resource</h3>

  <span ng-show="status" class="alert-danger">{{ status.message }}</span>

        <div class="form-group">
          <input type="text"
          class="form-control"
          placeholder="Category"
          ng-model="category" required></input>
        </div>

        <div class="form-group">
          <input type="text"
            class="form-control"
            placeholder="Title"
            ng-model="title" required maxlength="38"></input>
        </div>

        <div class="form-group">
          <input type="text"
          class="form-control"
          placeholder="Link"
          ng-model="link" required></input>
        </div>

        <div class="form-group">
          <textarea
          class="form-control"
          placeholder="Info"
          ng-model="info"></textarea>
        </div>

        <button type="submit" class="btn btn-primary">Save</button>
        <button type="button" class="btn btn-primary" ng-click="closeThisDialog()">Close</button>
      </form>
</script>


<!--=====================================================================================================EDIT POST-->
<script type="text/ng-template" id="editPost.html">
    <form ng-submit="editPost(ngDialogData,googletoken)" <% if (user) { %> ng-show='true'<% } %> ng-show="isLoggedIn()">
        <h3>Update resource</h3>


    <span ng-show="status" class="alert-success">{{ status.message }}</span>
  

        <div class="form-group">Category:
          <input type="text"
          class="form-control"
          placeholder="Category"
          ng-model="ngDialogData.category"  required></input>
        </div>

        <div class="form-group">Title:
          <input type="text"
            class="form-control"
            ng-model="ngDialogData.title" required maxlength="38"></input>
        </div>

        <div class="form-group">Link:
          <input type="text"
          class="form-control"
          placeholder="Link"
          ng-model="ngDialogData.link" required></input>
        </div>

        <div class="form-group">Info:
          <textarea
          class="form-control"
          placeholder="Info"
          ng-model="ngDialogData.info"></textarea>
        </div>

        <button type="submit" class="btn btn-primary">Update</button>
        <button type="button" class="btn btn-primary" ng-click="closeThisDialog()">Close</button>
      </form>
</script>


<!--=====================================================================================================RESTRICTED-->
<script type="text/ng-template" id="restricted.html">
<div class="alert alert-danger-custom">
Hey dude, you are not authorized!
</div>
</script>


<!--=====================================================================================================POSTS-->
<script type="text/ng-template" id="/posts.html">
  <div class="page-header">
    <h3>
      <a ng-show="post.link" href="{{post.link}}">
        {{post.title}}
      </a>
      <span ng-hide="post.link">
        {{post.title}}
      </span>
    </h3>
  </div>

  <div ng-repeat="comment in post.comments | filter:query | orderBy:'-upvotes'">
    <span class="glyphicon glyphicon-thumbs-up"
      ng-click="incrementUpvotes(comment)"></span>
      
      <span class="glyphicon glyphicon-thumbs-down"  
      ng-click="decrementUpvotes(comment)"></span>
      
    {{comment.upvotes}} - by {{comment.author}}
    <span style="font-size:20px; margin-left:10px;">
      {{comment.body}}
    </span>
  </div>
  
    <form ng-submit="addComment()" <% if (user) { %> ng-show='true'<% } %> ng-show="isLoggedIn()"
    style="margin-top:30px;">
    <h3>Add a new comment</h3>

    <div class="form-group">
      <input type="text"
      class="form-control"
      placeholder="Comment"
      ng-model="body"></input>
    </div>
    <button type="submit" class="btn btn-primary">Post</button>
  </form>
  
  <div <% if (user) { %> ng-hide='true'<% } %>  ng-hide="isLoggedIn()">
  <h3>You need to <a href="/#/login">Log In</a> or <a href="/#/register">Register</a> before you can comment.</h3>
  </div>
  
</script>
</html>

<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.10/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.10/angular-ui-router.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.10/angular-animate.min.js"></script>
<script src="/bower_components/ngDialog/js/ngDialog.js"></script>
<script src="/javascripts/angularApp.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>